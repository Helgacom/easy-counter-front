<div class="outer-container">
  <div class="body">
    <div class="container mt-3">
      <h4>@EASY&FOOD >> {{ editMode ? 'Редактировать' : 'Добавить новый' }} продукт</h4>

      <form [formGroup]="form" (ngSubmit)="save()" *ngIf="!isLoading; else loading">
        <div class="form-group mb-3">
          <label for="name">Название <span class="text-danger">*</span></label>
          <input
            id="name"
            class="form-control"
            formControlName="name"
            placeholder="Введите название"/>
          <div *ngIf="form.get('name')?.invalid && form.get('name')?.touched" class="text-danger">
            Название обязательно (минимум 2 символа)
          </div>
        </div>

        <div class="form-group mb-3">
          <label for="caloriesPer100g">Калорийность (ккал/100г)</label>
          <input
            id="caloriesPer100g"
            type="number"
            step="0.1"
            class="form-control"
            formControlName="caloriesPer100g"
            placeholder="0.0"/>
        </div>

        <div class="form-group mb-3">
          <label for="protein">Белки (г/100г)</label>
          <input
            id="protein"
            type="number"
            step="0.1"
            class="form-control"
            formControlName="protein"
            placeholder="0.0"/>
        </div>

        <div class="form-group mb-3">
          <label for="fat">Жиры (г/100г)</label>
          <input
            id="fat"
            type="number"
            step="0.1"
            class="form-control"
            formControlName="fat"
            placeholder="0.0"/>
        </div>

        <div class="form-group mb-3">
          <label for="carb">Углеводы (г/100г)</label>
          <input
            id="carb"
            type="number"
            step="0.1"
            class="form-control"
            formControlName="carb"
            placeholder="0.0"/>
        </div>

        <div class="form-group mb-3">
          <label for="description">Описание</label>
          <textarea
            id="description"
            class="form-control"
            rows="4"
            formControlName="description"
            placeholder="Введите описание продукта"></textarea>
        </div>

        <div class="mt-4">
          <button
            type="submit"
            class="btn btn-primary me-2"
            [disabled]="form.invalid || isLoading">
            Сохранить
          </button>
          <button
            type="button"
            class="btn btn-secondary me-2"
            (click)="cancel()"
            [disabled]="isLoading">
            Отмена
          </button>
        </div>
      </form>

      <ng-template #loading>
        <div class="text-center">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Загрузка...</span>
          </div>
          <p>Идёт сохранение...</p>
        </div>
      </ng-template>

      <div class="mt-3">
        <a class="btn btn-outline-info" routerLink="/">Главная</a>
        <a class="btn btn-outline-secondary ms-2" routerLink="/products">К продуктам</a>
        <a class="btn btn-outline-danger ms-2" (click)="clearForm()">Сбросить</a>
      </div>
    </div>
  </div>
</div>

